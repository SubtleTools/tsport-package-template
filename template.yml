$schema: 'https://moonrepo.dev/schemas/template.json'

id: "tsport"
title: "TSports Package"
description: "Template for creating new TypeScript ports of Go packages in the TSports ecosystem"
destination: "packages"

variables:
  goRepo:
    type: "string"
    required: true
    prompt: "Go repository URL to port (e.g., https://github.com/charmbracelet/lipgloss)"
    order: 1

  packageName:
    type: "string"
    required: true
    prompt: "TypeScript package name (e.g., @tsports/lipgloss)"
    order: 2

  description:
    type: "string"
    required: false
    prompt: "Package description (leave empty for auto-generated)"
    order: 3
    
  keywords:
    type: "array"
    required: false
    prompt: "Additional keywords (comma-separated, leave empty for auto-generated)"
    order: 4

  # Computed variables
  repositoryUrl:
    type: "string"
    required: false
    internal: true
    default: "{% set cleanName = packageName | replace(from='@tsports/', to='') %}https://github.com/TSports/{{ cleanName }}"

  goPackageName:
    type: "string"
    required: false
    internal: true
    default: "{{ goRepo | regex_replace(pattern='.*github\\.com/[^/]+/([^/]+).*', rep='$1') }}"

  generatedKeywords:
    type: "array" 
    required: false
    internal: true
    default: ["go-port", "typescript"]

  finalDescription:
    type: "string"
    required: false
    internal: true
    default: "{% if description %}{{ description }}{% else %}TypeScript port of {{ goPackageName }} with 100% API compatibility{% endif %}"
